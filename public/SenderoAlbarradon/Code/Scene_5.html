<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    
    
    <!-- Water Shader -->   
    <script>
  AFRAME.registerShader('makewaves', {
    schema: {
      color: {
        type: 'color',
        is: 'uniform',
        default: '#0051da'
      },
      timeMsec: {
        type: 'time',
        is: 'uniform'
      },
      uMap: {
      type: 'map',
        is: 'uniform'
      }
    },
    vertexShader: `
#define SCALE 10.0
varying vec2 vUv;
uniform float timeMsec;
float calculateSurface(float x, float z) {
    float uTime = timeMsec / 1000.0;
    float y = 0.0;
    y += (sin(x * 1.0 / SCALE + uTime * 1.0) + sin(x * 2.3 / SCALE + uTime * 1.5) + sin(x * 3.3 / SCALE + uTime * 0.4)) / 3.0;
    y += (sin(z * 0.2 / SCALE + uTime * 1.8) + sin(z * 1.8 / SCALE + uTime * 1.8) + sin(z * 2.8 / SCALE + uTime * 0.8)) / 3.0;
    return y;
}
void main() {
    float uTime = timeMsec / 1000.0;
    vUv = uv;
    vec3 pos = position;
    float strength = 1.0;
    pos.y += strength * calculateSurface(pos.x, pos.z);
    pos.y -= strength * calculateSurface(0.0, 0.0);
    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
}
`,
    fragmentShader: `
varying vec2 vUv;
uniform sampler2D uMap;
uniform vec3 color;
uniform float timeMsec;
void main() {
    float uTime = timeMsec / 1000.0;
    vec2 uv = vUv * 10.0 + vec2(uTime * -0.05);
    uv.y += 0.01 * (sin(uv.x * 3.5 + uTime * 0.35) + sin(uv.x * 4.8 + uTime * 1.05) + sin(uv.x * 7.3 + uTime * 0.45)) / 3.0;
    uv.x += 0.12 * (sin(uv.y * 4.0 + uTime * 0.5) + sin(uv.y * 6.8 + uTime * 0.75) + sin(uv.y * 11.3 + uTime * 0.2)) / 3.0;
    uv.y += 0.12 * (sin(uv.x * 4.2 + uTime * 0.64) + sin(uv.x * 6.3 + uTime * 1.65) + sin(uv.x * 8.2 + uTime * 0.45)) / 3.0;
    vec4 tex1 = texture2D(uMap, uv * 1.0);
    vec4 tex2 = texture2D(uMap, uv * 1.0 + vec2(0.2));
    vec3 blue = color;
    gl_FragColor = vec4(blue + vec3(tex1.a * 0.9 - tex2.a * 0.02), 1.0);
}`
  });

    </script>    
  </head>

  <body>
    <!-- Compressor, Loading Screen, Fog -->
    <a-scene
    gltf-model="dracoDecoderPath: https://cdn.8thwall.com/web/aframe/draco-decoder/"
    xrweb a-scene loading-screen="dotsColor: #603123; backgroundColor: #c7c6bc"
   ></a-entity>

      <!-- Asset management system. -->
    <a-assets>
      <img id="sky" src="Asset_5/12.jpg">     
      <!-- <audio id="sound" src="Asset_2/Sound_2.mp3" preload="auto"></audio>
      <audio id="music" src="Asset_2/Music_2.mp3" preload="auto"></audio> --> 
      <a-asset-item id="1" src="Asset_5/1.glb"></a-asset-item>
      <a-asset-item id="2" src="Asset_5/z.glb"></a-asset-item>
      <a-asset-item id="3" src="Asset_5/3.glb"></a-asset-item>
      <a-asset-item id="4" src="Asset_5/4.glb"></a-asset-item>
      <a-asset-item id="5" src="Asset_5/5.glb"></a-asset-item>
      <a-asset-item id="6" src="Asset_5/6.glb"></a-asset-item>
      <a-asset-item id="7" src="Asset_5/7.glb"></a-asset-item>
      <a-asset-item id="8" src="Asset_5/8.glb"></a-asset-item>
      <a-asset-item id="9" src="Asset_5/9.glb"></a-asset-item>
      <a-asset-item id="10" src="Asset_5/10.glb"></a-asset-item>
      <a-asset-item id="11" src="Asset_5/11.glb"></a-asset-item>
      <a-asset-item id="12" src="Asset_5/12.jpg"></a-asset-item>
    </a-assets>    
      
       <!-- Scene. -->
      <a-sky src="#12"></a-sky>    
      <!--
      <a-entity sound="src: #sound; autoplay: true; loop: true"></a-entity>
      <a-entity sound="src: #music; autoplay: true; loop: true"></a-entity>
      <a-text color="black" value="En Desarrollo" position="-0.5 2.5 -3" rotation="0 0 0"></a-text>
      -->
      <a-entity gltf-model="#1"></a-entity>
      <a-entity gltf-model="#2"></a-entity>
      <a-entity gltf-model="#3"></a-entity>
      <a-entity gltf-model="#4"></a-entity>
      <a-entity gltf-model="#5"></a-entity>
      <a-entity gltf-model="#6"></a-entity>
      <a-entity gltf-model="#7"></a-entity>
      <a-entity gltf-model="#8"></a-entity>
      <a-entity gltf-model="#9"></a-entity>
      <a-entity gltf-model="#10"></a-entity>
      <a-entity gltf-model="#11"></a-entity>

      
      <a-entity camera="" position="-82.69419 7.2392 2.01608" wasd-controls="" rotation="-2.7501974166279517 -143.58322345978425 0" look-controls="" aframe-injected="" data-aframe-inspector-original-camera=""></a-entity>


      
      <a-entity position="0 2.25 -15" particle-system="preset: snow; particleCount: 5000"></a-entity>
      <a-plane rotation="-90 0 0" position="0 3.74801 0" width="500" height="500" segments-height="2" segments-width="2" material="shader: makewaves; uMap: https://cinemont.com/tutorials/zelda/water.png; repeat: 15 15; transparent: true; color: #336c70" geometry=""></a-plane>        
    </a-scene>
  </body>
</html>










